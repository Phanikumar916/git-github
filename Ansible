Create 3 Ec2 instances, one is for master and another 2 is for nodes
sudo amazon-linux-extras install ansible2 -y

host related configuration files all are stored in /etc
vi /etc/ansible/hosts (all inventrory files wil be stored in this file)
Below this line (Ex 1: Ungrouped hosts, specify before any group headers)
[dev]
private ip address
[qa]
private ip address
Always give private ip address, in real time in vpc you will give private ip address only
vi /etc/ansible/ansible.cfg (Configuration Files)
Uncheck Inventory & sudo_user (remove # for both the lines and save)
useradd ansible
passwd ansible (give password and enter and it will show /passwd: all authentication tokens updated successfully/).
visudo
then give (ansible ALL=(ALL)   NOPASSWD: ALL) to provide ansible permissions and save
vim /etc/ssh/sshd_config (to provide password less authentication)
change password authetication no to yes (line no:63)
Continue from Sl.No-14 to 19 in Node-1 & Node-2 respectively
when we change in ssh file we need to restart 
systemctl restart sshd.service (restart for BOTH MASTER AND NODES)
systemctl status sshd.service  (STATUS FOR BOTH MASTER AND NODES)
login to su -  ansible (for both master and nodes)
sudo ssh-keygen
key will be generated
sudo ssh-copy-id ansible@localhost (to login in to local host)
ssh ansible@localhost (local host will be connected - private ip)
exit
type the command in Ansible Instance to connect to node-1
sudo ssh-copy-id ansible@"node-1 private ip"
enter password
ssh ansible@"private ip for node-1"
you will be connected to node-1
exit
repeat for Node-2 also and exit
Host Patterns
ansible all --list-hosts (to check ip address of all nodes)
ansible dev --list-hosts (to check devloper address of all nodes)
ansible qa --list-hosts ((to check qa address of all nodes)
to check node of praticular Ip we will use indexing
ansible all --list-hosts (indexing (n-1))
ansible all[1:3] --list-hosts
cd /tmp (you can check encrypted password
to check files created in all the nodes instead of individual checking
ansible all -a "ls"
ansible dev[0] -a "ls" (for particular node)
ansible all -a "touch file2" (to create files in all nodes)
ansible all -a "sudo yum install tree -y" (to install tree packages in tree")
ansible all -a "tree --version" (to check tree version)
ansible all -ba "yum remove tree -y" (b : become the sudo user)
Modules
ansible all -bm yum -a "pkg=tree state=present" - (to install) (like this only command need to give)
ansible all -bm yum -a "pkg=tree state=absent" ( to remove)
state = latest (to update already existing package)
state = started ( to start the package)
ansible all -bm yum -a "pkg=httpd state=present"
ansible all -bm service -a "name=httpd state=started"
ansible all -bm yum -a "pkg=httpd state=absent"
ansible all -bm user -a "name=phani" (to create users)
How to move files from master to nodes
Create file in master and write some content, then enter below command you need to mention source and destiation
ansible all -bm copy -a "src=f1 dest=/tmp"
 
































